# Repository Guidelines

## MCP Usage
Do not use any MCP tools or servers for this project. Work only with the local filesystem and shell commands.

## Project Structure & Module Organization
Entry point `src/main.tsx`; routing lives in `src/App.tsx`. Page-level views sit in `src/pages`, shared building blocks in `src/components`, and shadcn primitives in `src/components/ui`. Put reusable hooks in `src/hooks`, data helpers in `src/data` and `src/lib`, and third-party clients in `src/integrations`. Static assets remain in `public/`, Vite emits builds to `dist/`, and Supabase assets (migrations plus `functions/submit-quiz`) live in `supabase/`.

## Build, Test, and Development Commands
- `npm install` installs dependencies after cloning or whenever `package.json` changes (prefer npm to keep `package-lock.json` authoritative).
- `npm run dev` launches the Vite dev server at `http://localhost:5173` with hot reload.
- `npm run sitemap` regenerates `public/sitemap.xml` from static routes + blog metadata.
- `npm run build:search` regenerates `public/search-index.json` from content data files.
- `npm run prerender` rewrites `dist/**/index.html` with SEO `<head>` tags (runs after `vite build`).
- `npm run build` runs `npm run sitemap`, `npm run build:search`, `vite build`, and `npm run prerender` in sequence.
- `npm run build:dev` runs a development-mode Vite build (useful for debugging build output).
- `npm run preview` serves the production bundle locally for manual smoke-testing.
- `npm run lint` executes the TypeScript + React ESLint suite; keep the tree clean before opening a PR.

## Coding Style & Naming Conventions
Use TypeScript function components with PascalCase filenames (`Team.tsx`) and camelCase helpers (`useQuizForm`). Favor the `@/` alias defined in `tsconfig.json` for internal imports. ESLint enforces React Hooks rules—fix dependency prompts instead of muting them. Tailwind utilities drive styling; pull shared patterns into `src/components/ui`. Keep the existing 2-space indentation, semicolons, and descriptive prop names. Treat generated files such as `src/integrations/supabase/client.ts` as read-only and regenerate via Lovable when credentials change.

## Content, SEO, and Search Workflow
- Route metadata lives in `src/data/seoRoutes.ts` and powers the `<Seo>` component plus `scripts/prerender.tsx`.
- Blog metadata is in `src/data/blogPosts.ts`; blog bodies live in `src/pages/BlogPost.tsx` with per-slug blocks.
- Search uses `public/search-index.json`, generated by `scripts/build-search-index.ts` from content data files.
- `src/lib/siteMetadata.ts` supplies `baseUrl`, default descriptions, and social image defaults used by SEO helpers and sitemap generation.
- After editing SEO routes, blog metadata, or search-relevant content, rerun `npm run build` (or the specific `sitemap` / `build:search` scripts) to keep `public/` and `dist/` in sync.

## Codex CLI Page Checklist
- Add the page component under `src/pages` with a PascalCase filename.
- Register the route in `src/App.tsx`.
- Add a matching SEO entry in `src/data/seoRoutes.ts` so `<Seo>` and `scripts/prerender.tsx` stay aligned.
- If the page is pillar-related, update the related CTA in `src/pages/PillarPage.tsx`.
- Add navigation links in `src/components/layout/Header.tsx` and `src/components/layout/Footer.tsx` when the page should be discoverable.
- For blog updates: add metadata in `src/data/blogPosts.ts` and the post body in `src/pages/BlogPost.tsx`.
- Regenerate generated assets after content updates: `npm run sitemap` and/or `npm run build:search` (or just run `npm run build`).

## Generated Assets (Do Not Hand-Edit)
- `dist/` is build output; it is overwritten by `npm run build`.
- `public/sitemap.xml` is generated by `npm run sitemap`.
- `public/search-index.json` is generated by `npm run build:search`.

## Testing Guidelines
Automated tests are not yet configured. When adding them, follow the Vite stack (Vitest + Testing Library) and colocate specs next to the component (`Component.test.tsx`) or in `src/__tests__`. Until then, rely on `npm run preview` for regression passes and note covered scenarios in your PR. Record new test scripts in `package.json` and update this guide.

## Commit & Pull Request Guidelines
Recent commits use short, imperative messages (“Add Facebook group page”); keep that style and isolate scope per commit. Pull requests should provide a crisp summary, reference related issues or Supabase changes, include screenshots for UI work, and list manual verification steps. Re-run lint and build before requesting review.

## Supabase & Environment
Environment secrets load from `.env`; never commit production credentials. Frontend builds expect `VITE_SUPABASE_URL` and `VITE_SUPABASE_ANON_KEY`. The Supabase client under `src/integrations/supabase` is auto-generated—regenerate it after rotating keys instead of editing by hand. Develop edge functions with `supabase functions serve submit-quiz`, then deploy via `supabase functions deploy`. Keep `supabase/config.toml` aligned with dashboard settings so preview and production environments stay consistent.

## Docs and References
The deeper architectural walkthrough is in `docs/project-overview.md` and the content map in `README.md`. Use those when adding new pages, CTAs, or SEO metadata so the site voice stays consistent.
